<extend name="Public/base" />

<block name="body">
	<!-- 标题栏 -->

		<div class="g-wrap tab-wrap">
        <div class="u-tab">
            <ul class="cc tab-nav">
              	<li data-tab="tab1" class="current"><a href="javascript:void(0);">基 础</a></li>
				<li data-tab="tab2"><a href="javascript:void(0);">高 级</a></li>
            </ul>
        </div>
        <div class="common-form tab-content">
		    <form id="form" action="{:U('update')}" method="post" class="form-horizontal doc-modal-form">
		    	<div id="tab1" class="tab-pane in tab1 table_list">
				    <table width="100%">
			        <tbody>
			            <tr>
			              <td><label class="item-label">字段名:</label></td>
			              <td><input type="text" class="input input-large" name="name" value="{$info.name}">请输入字段名 英文字母开头，长度不超过30</td>
			            </tr>
			            <tr>
			              <td>字段标题:</td>
			              <td><input type="text" class="input input-large" name="title" value="{$info.title}"><span class="check-tips">请输入字段标题，用于表单显示</span></td>
			            </tr>
			            <tr>
			              <td>字段类型:</td>
			              <td>
			              	<select name="type" id="data-type">
								<option value="">----请选择----</option>
								<volist name=":get_attribute_type()" id="type">
								<option value="{$key}" rule="{$type[1]}">{$type[0]}</option>
								</volist>
							</select>
			              	<span class="check-tips">用于表单中的展示方式</span></td>
			            </tr>
			            <tr>
			              <td>字段定义</td>
			              <td><input type="text" class="input input-large" name="field" value="{$info.field}" id="data-field"><span class="check-tips">字段属性的sql表示(如：AUTO_INCREMENT)</div></td>
			            </tr>
			            <tr>
			              <td>参数</td>
			              <td><textarea name="extra">{$info.extra}</textarea><span class="check-tips">布尔、枚举、多选字段类型的定义数据</span>0:html1:ubb2:markdown</td>
			            </tr>
			            <tr>
			              	<td>默认值</td>
			              	<td>
			              		<input type="text" class="input input-large" name="value" value="{$info.value}">
							</td>
			            </tr>
			            <tr>
			              	<td><label class="item-label">字段备注</label></td>
			              	<td>
			              		<input type="text" class="input input-large" name="remark" value="{$info.remark}">(用于表单中的提示)
							</td>
			            </tr>
			            <tr>
			              	<td><label class="item-label">是否显示</label></td>
			              	<td>
			              		<select name="is_show">
									<option value="1">始终显示</option>
									<option value="2">新增显示</option>
									<option value="3">编辑显示</option>
									<option value="0">不显示</option>
								</select>
							</td>
			            </tr>
			            <tr>
			              	<td><label class="item-label">是否必填</label></td>
			              	<td>
			              		<select name="is_must">
									<option value="0">否</option>
									<option value="1">是</option>
								</select>用于自动验证
							</td>
			            </tr>
			        </tbody>
			      	</table>
			    </div>
			    <div id="tab2" class="tab-pane tab2 table_list">
				    <table width="100%">
			        <tbody>
			            <tr>
			              	<td><label class="item-label">验证方式</label></td>
			              	<td>
			              		<select name="validate_type">
									<option value="regex">正则验证</option>
									<option value="function">函数验证</option>
									<option value="unique">唯一验证</option>
									<option value="length">长度验证</option>
	                                <option value="in">验证在范围内</option>
	                                <option value="notin">验证不在范围内</option>
	                                <option value="between">区间验证</option>
	                                <option value="notbetween">不在区间验证</option>
								</select>
							</td>
			            </tr>
			            <tr>
			              <td><label class="item-label">验证规则:</label></td>
			              <td><input type="text" class="input input-large" name="validate_rule" value="{$info.validate_rule}">根据验证方式定义相关验证规则</td>
			            </tr>
			            <tr>
			              <td><label class="item-label">出错提示:</label></td>
			              <td><input type="text" class="input input-large" name="error_info" value="{$info.error_info}"></td>
			            </tr>
			            <tr>
			              <td><label class="item-label">验证时间:</label></td>
			              <td>
			              	<select name="validate_time">
                                <option value="3">始 终</option>
								<option value="1">新 增</option>
								<option value="2">编 辑</option>
								</select>
							</td>
			            </tr>
			            <tr>
			              <td><label class="item-label">自动完成方式:</label></td>
			              <td><select name="auto_type">
								<option value="function">函数</option>
								<option value="field">字段</option>
								<option value="string">字符串</option>
							</select></td>
			            </tr>
			            <tr>
			              <td><label class="item-label">自动完成规则:</label></td>
			              <td><input type="text" class="input input-large" name="auto_rule" value="{$info.auto_rule}"></td>
			            </tr>
			            <tr>
			              <td><label class="item-label">自动完成时间:</label></td>
			              <td><select name="auto_time">
								<option value="3">始 终</option>
								<option value="1">新 增</option>
								<option value="2">编 辑</option>
							</select></td>
			            </tr>
			        </tbody>
			      	</table>
			    </div>
			    <div class="btn_wrap">
		          <div class="btn_wrap_pd">
						<input type="hidden" name="id" value="{$info['id']}"/>
						<input type="hidden" name="model_id" value="{$info['model_id']}"/>
						<button class="btn submit-btn J_ajax_post no-refresh" type="submit" target-form="form-horizontal">确 定</button>
						<button class="btn btn-return" onclick="javascript:history.back(-1);return false;">返 回</button>
		          </div>
		        </div>
		    </form>
    	</div>
</block>

<block name="script">
<script type="text/javascript" charset="utf-8">
//导航高亮
Think.setValue('type', "{$info.type|default=''}");
Think.setValue('is_show', "{$info.is_show|default=1}");
Think.setValue('is_must', "{$info.is_must|default=0}");
Think.setValue('validate_time', "{$info.validate_time|default=3}");
Think.setValue('auto_time', "{$info.auto_time|default=3}");
Think.setValue('validate_type', "{$info.validate_type|default='regex'}");
Think.setValue('auto_type', "{$info.auto_type|default='function'}");
$(function(){
	showTab();
})
<eq name="ACTION_NAME" value="add">
$(function(){
	$('#data-type').change(function(){
		$('#data-field').val($(this).find('option:selected').attr('rule'));
	});
})
</eq>
</script>
</block>

